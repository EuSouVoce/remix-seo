{"version":3,"sources":["../src/index.ts"],"sourcesContent":["import type {\n\tHtmlLinkDescriptor,\n\tHtmlMetaDescriptor,\n\tSeoMetaFunctionV2,\n\tV1_MetaDescriptor,\n\tV2_MetaDescriptor,\n} from \"./interfaces\";\n\nimport merge from \"just-merge\";\nimport type {\n\tSeoConfig,\n\tSeoFunction,\n\tSeoMetaFunction,\n\tSeoLinksFunction,\n\tRouteArgs,\n\tTwitterMeta,\n\tTwitterAppMeta,\n\tTwitterPlayerMeta,\n\tTwitterImageMeta,\n\tTwitterCardType,\n} from \"./interfaces\";\n\nexport type {\n\tV1_MetaDescriptor,\n\tV2_MetaDescriptor,\n\tHtmlLinkDescriptor,\n\tHtmlMetaDescriptor,\n};\n\n/**\n * A function for setting default SEO meta for Remix sites.\n *\n * @param defaultConfig - The default configuration object. Each of the returned\n * functions will merge their own config with the default config when called on\n * a specific route.\n * @returns An object with three methods to use for getting SEO link and meta\n * tags on the site's routes.\n */\nexport function initSeo(defaultConfig?: SeoConfig): {\n\tgetSeo: SeoFunction;\n\tgetSeoMeta: SeoMetaFunction;\n\tgetSeoMetaV2: SeoMetaFunctionV2;\n\tgetSeoLinks: SeoLinksFunction;\n} {\n\tconst getSeo: SeoFunction = (\n\t\tcfg?: SeoConfig | ((routeArgs?: RouteArgs) => SeoConfig),\n\t\trouteArgs?: RouteArgs,\n\t): [V1_MetaDescriptor, V2_MetaDescriptor[], HtmlLinkDescriptor[]] => {\n\t\tlet config = resolveConfig(defaultConfig, cfg, routeArgs);\n\t\tlet meta = getMeta(config, routeArgs);\n\t\tlet metaV2 = v1ToV2(meta);\n\t\tlet links = getLinks(config, routeArgs);\n\t\treturn [meta, metaV2, links];\n\t};\n\n\tconst getSeoMeta: SeoMetaFunction = (\n\t\tcfg?: SeoConfig | ((routeArgs?: RouteArgs) => SeoConfig),\n\t\trouteArgs?: RouteArgs,\n\t): HtmlMetaDescriptor => {\n\t\tlet config = resolveConfig(defaultConfig, cfg, routeArgs);\n\t\tlet meta = getMeta(config, routeArgs);\n\t\treturn meta;\n\t};\n\tconst getSeoMetaV2: SeoMetaFunctionV2 = (\n\t\tcfg?: SeoConfig | ((routeArgs?: RouteArgs) => SeoConfig),\n\t\trouteArgs?: RouteArgs,\n\t): V2_MetaDescriptor[] => {\n\t\tlet config = resolveConfig(defaultConfig, cfg, routeArgs);\n\t\tlet meta = v1ToV2(getMeta(config, routeArgs));\n\t\treturn meta;\n\t};\n\n\tconst getSeoLinks: SeoLinksFunction = (\n\t\tcfg?: SeoConfig | ((routeArgs?: RouteArgs) => SeoConfig),\n\t\trouteArgs?: RouteArgs,\n\t): HtmlLinkDescriptor[] => {\n\t\tlet config = resolveConfig(defaultConfig, cfg, routeArgs);\n\t\tlet links = getLinks(config, routeArgs);\n\t\treturn links;\n\t};\n\n\treturn {\n\t\tgetSeo,\n\t\tgetSeoMeta,\n\t\tgetSeoMetaV2,\n\t\tgetSeoLinks,\n\t};\n}\n\nfunction getMeta(config: SeoConfig, arg: any) {\n\tlet meta: HtmlMetaDescriptor = {};\n\tlet title = getSeoTitle(config);\n\tlet {\n\t\tcanonical,\n\t\tdescription,\n\t\tfacebook,\n\t\tomitGoogleBotMeta = false,\n\t\topenGraph,\n\t\trobots = {},\n\t\ttwitter,\n\t} = config;\n\n\tif (title) {\n\t\tmeta.title = title;\n\t}\n\n\tif (description) {\n\t\tmeta.description = description;\n\t}\n\n\t// Robots\n\tlet {\n\t\tmaxImagePreview,\n\t\tmaxSnippet,\n\t\tmaxVideoPreview,\n\t\tnoArchive,\n\t\tnoFollow,\n\t\tnoImageIndex,\n\t\tnoIndex,\n\t\tnoSnippet,\n\t\tnoTranslate,\n\t\tunavailableAfter,\n\t} = robots;\n\n\tlet robotsParams = [\n\t\tnoArchive && \"noarchive\",\n\t\tnoImageIndex && \"noimageindex\",\n\t\tnoSnippet && \"nosnippet\",\n\t\tnoTranslate && `notranslate`,\n\t\tmaxImagePreview && `max-image-preview:${maxImagePreview}`,\n\t\tmaxSnippet && `max-snippet:${maxSnippet}`,\n\t\tmaxVideoPreview && `max-video-preview:${maxVideoPreview}`,\n\t\tunavailableAfter && `unavailable_after:${unavailableAfter}`,\n\t];\n\n\tlet robotsParam =\n\t\t(noIndex ? \"noindex\" : \"index\") + \",\" + (noFollow ? \"nofollow\" : \"follow\");\n\n\tfor (let param of robotsParams) {\n\t\tif (param) {\n\t\t\trobotsParam += `,${param}`;\n\t\t}\n\t}\n\n\tmeta.robots = robotsParam;\n\tif (!omitGoogleBotMeta) {\n\t\tmeta.googlebot = meta.robots;\n\t}\n\n\t// OG: Twitter\n\tif (twitter) {\n\t\tif (twitter.title || title) {\n\t\t\tmeta[\"twitter:title\"] = twitter.title || title;\n\t\t}\n\n\t\tif (twitter.description || openGraph?.description || description) {\n\t\t\tmeta[\"twitter:description\"] =\n\t\t\t\ttwitter.description || openGraph?.description || description!;\n\t\t}\n\n\t\tif (twitter.card) {\n\t\t\tlet cardType = validateTwitterCard(twitter);\n\t\t\tif (cardType) {\n\t\t\t\tmeta[\"twitter:card\"] = cardType;\n\t\t\t}\n\t\t}\n\n\t\tif (twitter.site) {\n\t\t\tmeta[\"twitter:site\"] =\n\t\t\t\ttypeof twitter.site === \"object\" ? twitter.site.id : twitter.site;\n\t\t}\n\n\t\tif (twitter.creator) {\n\t\t\tmeta[\"twitter:creator\"] =\n\t\t\t\ttypeof twitter.creator === \"object\"\n\t\t\t\t\t? twitter.creator.id\n\t\t\t\t\t: twitter.creator;\n\t\t}\n\n\t\tif (hasTwitterImageMeta(twitter)) {\n\t\t\twarnIfInvalidUrl(\n\t\t\t\ttwitter.image.url,\n\t\t\t\t`The twitter:image tag must be a valid, absolute URL. Relative paths will not work as expected. Check the config's \\`twitter.image.url\\` value.`,\n\t\t\t);\n\t\t\tmeta[\"twitter:image\"] = twitter.image.url;\n\t\t\tif (twitter.image!.alt) {\n\t\t\t\tmeta[\"twitter:image:alt\"] = twitter.image.alt;\n\t\t\t} else {\n\t\t\t\twarn(\n\t\t\t\t\t\"A Twitter image should use alt text that describes the image. This is important for users who are visually impaired. Please add a text value to the `alt` key of the `twitter.image` config option to dismiss this warning.\",\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tif (hasTwitterPlayerMeta(twitter)) {\n\t\t\tif (twitter.player.url) {\n\t\t\t\twarnIfInvalidUrl(\n\t\t\t\t\ttwitter.player.url,\n\t\t\t\t\t`The twitter:player tag must be a valid, absolute URL. Relative paths will not work as expected. Check the config's \\`twitter.player.url\\` value.`,\n\t\t\t\t);\n\t\t\t\tmeta[\"twitter:player\"] = twitter.player.url;\n\t\t\t}\n\n\t\t\tif (twitter.player.stream) {\n\t\t\t\twarnIfInvalidUrl(\n\t\t\t\t\ttwitter.player.stream,\n\t\t\t\t\t`The twitter:player:stream tag must be a valid, absolute URL. Relative paths will not work as expected. Check the config's \\`twitter.player.stream\\` value.`,\n\t\t\t\t);\n\t\t\t\tmeta[\"twitter:player:stream\"] = twitter.player.stream;\n\t\t\t}\n\n\t\t\tif (twitter.player.height) {\n\t\t\t\tmeta[\"twitter:player:height\"] = twitter.player.height.toString();\n\t\t\t}\n\n\t\t\tif (twitter.player.width) {\n\t\t\t\tmeta[\"twitter:player:height\"] = twitter.player.width.toString();\n\t\t\t}\n\t\t}\n\n\t\tif (hasTwitterAppMeta(twitter)) {\n\t\t\tconst twitterDevices = [\"iPhone\", \"iPad\", \"googlePlay\"] as const;\n\n\t\t\tif (typeof twitter.app.name === \"object\") {\n\t\t\t\tfor (const device of twitterDevices) {\n\t\t\t\t\tif (twitter.app.name[device]) {\n\t\t\t\t\t\tmeta[`twitter:app:name:${device.toLowerCase()}`] =\n\t\t\t\t\t\t\ttwitter.app.name[device]!;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tmeta[\"twitter:app:name:iphone\"] = twitter.app.name;\n\t\t\t\tmeta[\"twitter:app:name:ipad\"] = twitter.app.name;\n\t\t\t\tmeta[\"twitter:app:name:googleplay\"] = twitter.app.name;\n\t\t\t}\n\n\t\t\tif (typeof twitter.app.id === \"object\") {\n\t\t\t\tfor (const device of twitterDevices) {\n\t\t\t\t\tif (twitter.app.id[device]) {\n\t\t\t\t\t\tmeta[`twitter:app:id:${device.toLowerCase()}`] =\n\t\t\t\t\t\t\ttwitter.app.id[device]!;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (typeof twitter.app.url === \"object\") {\n\t\t\t\tfor (const device of twitterDevices) {\n\t\t\t\t\tif (twitter.app.url[device]) {\n\t\t\t\t\t\tmeta[`twitter:app:url:${device.toLowerCase()}`] =\n\t\t\t\t\t\t\ttwitter.app.url[device]!;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (!meta[\"twitter:card\"]) {\n\t\t\tif (hasTwitterPlayerMeta(twitter)) {\n\t\t\t\tmeta[\"twitter:card\"] = \"player\";\n\t\t\t} else if (hasTwitterAppMeta(twitter)) {\n\t\t\t\tmeta[\"twitter:card\"] = \"app\";\n\t\t\t} else if (hasTwitterImageMeta(twitter)) {\n\t\t\t\tmeta[\"twitter:card\"] = \"summary\";\n\t\t\t}\n\t\t}\n\t}\n\n\t// OG: Facebook\n\tif (facebook) {\n\t\tif (facebook.appId) {\n\t\t\tmeta[\"fb:app_id\"] = facebook.appId;\n\t\t}\n\t}\n\n\t// OG: Other stuff\n\tif (openGraph?.title || config.title) {\n\t\tmeta[\"og:title\"] = openGraph?.title || title;\n\t}\n\n\tif (openGraph?.description || description) {\n\t\tmeta[\"og:description\"] = openGraph?.description || description!;\n\t}\n\n\tif (openGraph) {\n\t\tif (openGraph.url || canonical) {\n\t\t\tif (openGraph.url) {\n\t\t\t\twarnIfInvalidUrl(\n\t\t\t\t\topenGraph.url,\n\t\t\t\t\t`The og:url tag must be a valid, absolute URL. Relative paths will not work as expected. Check the config's \\`openGraph.url\\` value.`,\n\t\t\t\t);\n\t\t\t}\n\t\t\tif (canonical) {\n\t\t\t\twarnIfInvalidUrl(\n\t\t\t\t\tcanonical,\n\t\t\t\t\t`The og:url tag must be a valid, absolute URL. Relative paths will not work as expected. Check the config's \\`canonical\\` value.`,\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tmeta[\"og:url\"] = openGraph.url || canonical!;\n\t\t}\n\n\t\tif (openGraph.type) {\n\t\t\tconst ogType = openGraph.type.toLowerCase();\n\n\t\t\tmeta[\"og:type\"] = ogType;\n\n\t\t\tif (ogType === \"profile\" && openGraph.profile) {\n\t\t\t\tif (openGraph.profile.firstName) {\n\t\t\t\t\tmeta[\"profile:first_name\"] = openGraph.profile.firstName;\n\t\t\t\t}\n\n\t\t\t\tif (openGraph.profile.lastName) {\n\t\t\t\t\tmeta[\"profile:last_name\"] = openGraph.profile.lastName;\n\t\t\t\t}\n\n\t\t\t\tif (openGraph.profile.username) {\n\t\t\t\t\tmeta[\"profile:username\"] = openGraph.profile.username;\n\t\t\t\t}\n\n\t\t\t\tif (openGraph.profile.gender) {\n\t\t\t\t\tmeta[\"profile:gender\"] = openGraph.profile.gender;\n\t\t\t\t}\n\t\t\t} else if (ogType === \"book\" && openGraph.book) {\n\t\t\t\tif (openGraph.book.authors && openGraph.book.authors.length) {\n\t\t\t\t\tfor (let author of openGraph.book.authors) {\n\t\t\t\t\t\tif (Array.isArray(meta[\"book:author\"])) {\n\t\t\t\t\t\t\tmeta[\"book:author\"].push(author);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tmeta[\"book:author\"] = [author];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (openGraph.book.isbn) {\n\t\t\t\t\tmeta[\"book:isbn\"] = openGraph.book.isbn;\n\t\t\t\t}\n\n\t\t\t\tif (openGraph.book.releaseDate) {\n\t\t\t\t\tmeta[\"book:release_date\"] = openGraph.book.releaseDate;\n\t\t\t\t}\n\n\t\t\t\tif (openGraph.book.tags && openGraph.book.tags.length) {\n\t\t\t\t\tfor (let tag of openGraph.book.tags) {\n\t\t\t\t\t\tif (Array.isArray(meta[\"book:tag\"])) {\n\t\t\t\t\t\t\tmeta[\"book:tag\"].push(tag);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tmeta[\"book:tag\"] = [tag];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (ogType === \"article\" && openGraph.article) {\n\t\t\t\tif (openGraph.article.publishedTime) {\n\t\t\t\t\tmeta[\"article:published_time\"] = openGraph.article.publishedTime;\n\t\t\t\t}\n\n\t\t\t\tif (openGraph.article.modifiedTime) {\n\t\t\t\t\tmeta[\"article:modified_time\"] = openGraph.article.modifiedTime;\n\t\t\t\t}\n\n\t\t\t\tif (openGraph.article.expirationTime) {\n\t\t\t\t\tmeta[\"article:expiration_time\"] = openGraph.article.expirationTime;\n\t\t\t\t}\n\n\t\t\t\tif (openGraph.article.authors && openGraph.article.authors.length) {\n\t\t\t\t\tfor (let author of openGraph.article.authors) {\n\t\t\t\t\t\tif (Array.isArray(meta[\"article:author\"])) {\n\t\t\t\t\t\t\tmeta[\"article:author\"].push(author);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tmeta[\"article:author\"] = [author];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (openGraph.article.section) {\n\t\t\t\t\tmeta[\"article:section\"] = openGraph.article.section;\n\t\t\t\t}\n\n\t\t\t\tif (openGraph.article.tags && openGraph.article.tags.length) {\n\t\t\t\t\tfor (let tag of openGraph.article.tags) {\n\t\t\t\t\t\tif (Array.isArray(meta[\"article:tag\"])) {\n\t\t\t\t\t\t\tmeta[\"article:tag\"].push(tag);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tmeta[\"article:tag\"] = [tag];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (\n\t\t\t\t(ogType === \"video.movie\" ||\n\t\t\t\t\togType === \"video.episode\" ||\n\t\t\t\t\togType === \"video.tv_show\" ||\n\t\t\t\t\togType === \"video.other\") &&\n\t\t\t\topenGraph.video\n\t\t\t) {\n\t\t\t\tif (openGraph.video.actors && openGraph.video.actors.length) {\n\t\t\t\t\tfor (let actor of openGraph.video.actors) {\n\t\t\t\t\t\tif (actor.profile) {\n\t\t\t\t\t\t\tmeta[\"video:actor\"] = actor.profile;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (actor.role) {\n\t\t\t\t\t\t\tmeta[\"video:actor:role\"] = actor.role;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (openGraph.video.directors && openGraph.video.directors.length) {\n\t\t\t\t\tfor (let director of openGraph.video.directors) {\n\t\t\t\t\t\tmeta[\"video:director\"] = director;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (openGraph.video.writers && openGraph.video.writers.length) {\n\t\t\t\t\tfor (let writer of openGraph.video.writers) {\n\t\t\t\t\t\tmeta[\"video:writer\"] = writer;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (openGraph.video.duration) {\n\t\t\t\t\tmeta[\"video:duration\"] = openGraph.video.duration.toString();\n\t\t\t\t}\n\n\t\t\t\tif (openGraph.video.releaseDate) {\n\t\t\t\t\tmeta[\"video:release_date\"] = openGraph.video.releaseDate;\n\t\t\t\t}\n\n\t\t\t\tif (openGraph.video.tags && openGraph.video.tags.length) {\n\t\t\t\t\tfor (let tag of openGraph.video.tags) {\n\t\t\t\t\t\tmeta[\"video:tag\"] = tag;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (openGraph.video.series) {\n\t\t\t\t\tmeta[\"video:series\"] = openGraph.video.series;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (openGraph.images && openGraph.images.length) {\n\t\t\tfor (let image of openGraph.images) {\n\t\t\t\twarnIfInvalidUrl(\n\t\t\t\t\timage.url,\n\t\t\t\t\t`The og:image tag must be a valid, absolute URL. Relative paths will not work as expected. Check each \\`url\\` value in the config's \\`openGraph.images\\` array.`,\n\t\t\t\t);\n\t\t\t\tmeta[\"og:image\"] = image.url;\n\t\t\t\tif (image.alt) {\n\t\t\t\t\tmeta[\"og:image:alt\"] = image.alt;\n\t\t\t\t} else {\n\t\t\t\t\twarn(\n\t\t\t\t\t\t\"OpenGraph images should use alt text that describes the image. This is important for users who are visually impaired. Please add a text value to the `alt` key of all `openGraph.images` config options to dismiss this warning.\",\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tif (image.secureUrl) {\n\t\t\t\t\twarnIfInvalidUrl(\n\t\t\t\t\t\timage.secureUrl,\n\t\t\t\t\t\t`The og:image:secure_url tag must be a valid, absolute URL. Relative paths will not work as expected. Check each \\`secureUrl\\` value in the config's \\`openGraph.images\\` array.`,\n\t\t\t\t\t);\n\t\t\t\t\tmeta[\"og:image:secure_url\"] = image.secureUrl.toString();\n\t\t\t\t}\n\n\t\t\t\tif (image.type) {\n\t\t\t\t\tmeta[\"og:image:type\"] = image.type.toString();\n\t\t\t\t}\n\n\t\t\t\tif (image.width) {\n\t\t\t\t\tmeta[\"og:image:width\"] = image.width.toString();\n\t\t\t\t}\n\n\t\t\t\tif (image.height) {\n\t\t\t\t\tmeta[\"og:image:height\"] = image.height.toString();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (openGraph.videos && openGraph.videos.length) {\n\t\t\tfor (let video of openGraph.videos) {\n\t\t\t\twarnIfInvalidUrl(\n\t\t\t\t\tvideo.url,\n\t\t\t\t\t`The og:video tag must be a valid, absolute URL. Relative paths will not work as expected. Check each \\`url\\` value in the config's \\`openGraph.videos\\` array.`,\n\t\t\t\t);\n\t\t\t\tmeta[\"og:video\"] = video.url;\n\t\t\t\tif (video.alt) {\n\t\t\t\t\tmeta[\"og:video:alt\"] = video.alt;\n\t\t\t\t}\n\n\t\t\t\tif (video.secureUrl) {\n\t\t\t\t\twarnIfInvalidUrl(\n\t\t\t\t\t\tvideo.secureUrl,\n\t\t\t\t\t\t`The og:video:secure_url tag must be a valid, absolute URL. Relative paths will not work as expected. Check each \\`secureUrl\\` value in the config's \\`openGraph.videos\\` array.`,\n\t\t\t\t\t);\n\t\t\t\t\tmeta[\"og:video:secure_url\"] = video.secureUrl.toString();\n\t\t\t\t}\n\n\t\t\t\tif (video.type) {\n\t\t\t\t\tmeta[\"og:video:type\"] = video.type.toString();\n\t\t\t\t}\n\n\t\t\t\tif (video.width) {\n\t\t\t\t\tmeta[\"og:video:width\"] = video.width.toString();\n\t\t\t\t}\n\n\t\t\t\tif (video.height) {\n\t\t\t\t\tmeta[\"og:video:height\"] = video.height.toString();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (openGraph.locale) {\n\t\t\tmeta[\"og:locale\"] = openGraph.locale;\n\t\t}\n\n\t\tif (openGraph.siteName) {\n\t\t\tmeta[\"og:site_name\"] = openGraph.siteName;\n\t\t}\n\t}\n\n\treturn meta;\n}\n\nfunction getLinks(config: SeoConfig, arg: any): HtmlLinkDescriptor[] {\n\tlet links: HtmlLinkDescriptor[] = [];\n\tlet { canonical, mobileAlternate, languageAlternates = [] } = config;\n\n\tif (canonical) {\n\t\twarnIfInvalidUrl(\n\t\t\tcanonical,\n\t\t\t`The canonical link tag must have an \\`href\\` with a valid, absolute URL. Relative paths will not work as expected. Check the config's \\`canonical\\` value.`,\n\t\t);\n\t\tlinks.push({\n\t\t\trel: \"canonical\",\n\t\t\thref: canonical,\n\t\t});\n\t}\n\n\t// <link rel=\"alternate\">\n\tif (mobileAlternate) {\n\t\tif (!mobileAlternate.media || !mobileAlternate.href) {\n\t\t\twarn(\n\t\t\t\t\"`mobileAlternate` requires both the `media` and `href` attributes for it to generate the correct link tags. This config setting currently has no effect. Either add the missing keys or remove `mobileAlternate` from your config to dismiss this warning.\" +\n\t\t\t\t\t// TODO: See if we can find a better description of this tag w/o all\n\t\t\t\t\t// the marketing junk. MDN is a bit scant here.\n\t\t\t\t\t\"\\n\\nSee https://www.contentkingapp.com/academy/link-rel/#mobile-lok for a description of the tag this option generates.\",\n\t\t\t);\n\t\t} else {\n\t\t\tlinks.push({\n\t\t\t\trel: \"alternate\",\n\t\t\t\tmedia: mobileAlternate.media,\n\t\t\t\thref: mobileAlternate.href,\n\t\t\t});\n\t\t}\n\t}\n\n\tif (languageAlternates.length > 0) {\n\t\tfor (let languageAlternate of languageAlternates) {\n\t\t\tif (!languageAlternate.hrefLang || !languageAlternate.href) {\n\t\t\t\twarn(\n\t\t\t\t\t\"Items in `languageAlternates` requires both the `hrefLang` and `href` attributes for it to generate the correct link tags. One of your items in this config setting is missing an attribute and was skipped. Either add the missing keys or remove the incomplete object from the `languageAlternate` key in your config to dismiss this warning.\" +\n\t\t\t\t\t\t// TODO: See if we can find a better description of this tag w/o all\n\t\t\t\t\t\t// the marketing junk. MDN is a bit scant here.\n\t\t\t\t\t\t\"\\n\\nSee https://www.contentkingapp.com/academy/link-rel/#hreflang-look-like for a description of the tag this option generates.\",\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tlinks.push({\n\t\t\t\t\trel: \"alternate\",\n\t\t\t\t\threfLang: languageAlternate.hrefLang,\n\t\t\t\t\thref: languageAlternate.href,\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\treturn links;\n}\n\nexport default initSeo;\n\nfunction getSeoTitle(config: SeoConfig): string {\n\tlet bypassTemplate = config.bypassTemplate || false;\n\tlet templateTitle = config.titleTemplate || \"\";\n\tlet updatedTitle = \"\";\n\tif (config.title) {\n\t\tupdatedTitle = config.title;\n\t\tif (templateTitle && !bypassTemplate) {\n\t\t\tupdatedTitle = templateTitle.replace(/%s/g, () => updatedTitle);\n\t\t}\n\t} else if (config.defaultTitle) {\n\t\tupdatedTitle = config.defaultTitle;\n\t}\n\treturn updatedTitle;\n}\n\nfunction warn(message: string): void {\n\tif (typeof console !== \"undefined\") console.warn(\"remix-seo: \" + message);\n\ttry {\n\t\t// This error is thrown as a convenience so you can more easily\n\t\t// find the source for a warning that appears in the console by\n\t\t// enabling \"pause on exceptions\" in your JavaScript debugger.\n\t\tthrow new Error(\"remix-seo: \" + message);\n\t} catch (e) {}\n}\n\nfunction warnIfInvalidUrl(str: string, message: string) {\n\ttry {\n\t\tnew URL(str);\n\t} catch (_) {\n\t\tif (typeof console !== \"undefined\") console.warn(\"remix-seo: \" + message);\n\t}\n}\n\nfunction validateTwitterCard(\n\ttwitter: TwitterMeta,\n): TwitterCardType | undefined {\n\tif (!twitter.card) {\n\t\treturn;\n\t}\n\n\tif (\n\t\t![\"app\", \"player\", \"summary\", \"summary_large_image\"].includes(twitter.card)\n\t) {\n\t\twarn(`An invalid Twitter card was provided to the config and will be ignored. Make sure that \\`twitter.card\\` is set to one of the following:\n- \"app\"\n- \"player\"\n- \"summary\"\n- \"summary_large_image\"\n\nRead more: https://developer.twitter.com/en/docs/twitter-for-websites/cards/overview/markup`);\n\t\treturn;\n\t}\n\n\tif (hasTwitterAppMeta(twitter)) {\n\t\tif (twitter.card !== \"app\") {\n\t\t\twarn(`An Twitter card type of \\`${twitter.card}\\` was provided to a config with app metadata. Twitter app cards must use a \\`twitter:card\\` value of \\`\"app\"\\`, so the app metadata will be ignored. Fix the \\`twitter.card\\` value or remove the \\`twitter.app\\` config to dismiss this warning.\n\nRead more: https://developer.twitter.com/en/docs/twitter-for-websites/cards/overview/markup`);\n\t\t\t// @ts-ignore\n\t\t\tdelete twitter.app;\n\t\t} else {\n\t\t\tif (hasTwitterImageMeta(twitter)) {\n\t\t\t\twarn(`The Twitter app card type does not support the twitter:image metadata provided in your config. Remove the \\`twitter.image\\` config to dismiss this warning.\n\n\tRead more: https://developer.twitter.com/en/docs/twitter-for-websites/cards/overview/markup`);\n\t\t\t\t// @ts-ignore\n\t\t\t\tdelete twitter.image;\n\t\t\t}\n\n\t\t\tif (hasTwitterPlayerMeta(twitter)) {\n\t\t\t\twarn(`The Twitter app card type does not support the twitter:player metadata provided in your config. Remove the \\`twitter.player\\` config to dismiss this warning.\n\n\tRead more: https://developer.twitter.com/en/docs/twitter-for-websites/cards/overview/markup`);\n\t\t\t\t// @ts-ignore\n\t\t\t\tdelete twitter.player;\n\t\t\t}\n\n\t\t\treturn \"app\";\n\t\t}\n\t}\n\n\tif (hasTwitterPlayerMeta(twitter)) {\n\t\tif (twitter.card !== \"player\") {\n\t\t\twarn(`An Twitter card type of \\`${twitter.card}\\` was provided to a config with player metadata. Twitter player cards must use a \\`twitter:card\\` value of \\`\"player\"\\`, so the player metadata will be ignored. Fix the \\`twitter.card\\` value or remove the \\`twitter.player\\` config to dismiss this warning.\n\nRead more: https://developer.twitter.com/en/docs/twitter-for-websites/cards/overview/markup`);\n\t\t\t// @ts-ignore\n\t\t\tdelete twitter.player;\n\t\t} else {\n\t\t\treturn \"player\";\n\t\t}\n\t}\n\n\tif (\n\t\thasTwitterImageMeta(twitter) &&\n\t\t![\"summary\", \"summary_large_image\", \"player\"].includes(twitter.card)\n\t) {\n\t\tif (twitter.card !== \"player\") {\n\t\t\twarn(`An Twitter card type of \\`${twitter.card}\\` was provided to a config with image metadata. Cards that support image metadata are:\n- \"summary\"\n- \"summary_large_image\"\n- \"player\"\n\nThe image metadata will be ignored. Fix the \\`twitter.card\\` value or remove the \\`twitter.image\\` config to dismiss this warning.\n\nRead more: https://developer.twitter.com/en/docs/twitter-for-websites/cards/overview/markup`);\n\t\t\t// @ts-ignore\n\t\t\tdelete twitter.image;\n\t\t}\n\t}\n\n\treturn twitter.card as TwitterCardType;\n}\n\nfunction hasTwitterAppMeta(twitter: TwitterMeta): twitter is TwitterMeta & {\n\tapp: { name: Required<TwitterAppMeta[\"name\"]> } & TwitterAppMeta;\n} {\n\treturn !!(twitter.app && twitter.app.name);\n}\n\nfunction hasTwitterPlayerMeta(twitter: TwitterMeta): twitter is TwitterMeta & {\n\tplayer: TwitterPlayerMeta;\n} {\n\treturn !!(twitter.player && (twitter.player.url || twitter.player.stream));\n}\n\nfunction hasTwitterImageMeta(twitter: TwitterMeta): twitter is TwitterMeta & {\n\timage: { url: Required<TwitterImageMeta[\"url\"]> } & TwitterImageMeta;\n} {\n\treturn !!(twitter.image && twitter.image.url);\n}\n\nfunction resolveConfig(\n\tdefaultConfig: SeoConfig | undefined,\n\tlocalConfig: SeoConfig | ((routeArgs?: RouteArgs) => SeoConfig) | undefined,\n\trouteArgs: RouteArgs | undefined,\n) {\n\tlet config: SeoConfig =\n\t\ttypeof localConfig === \"function\"\n\t\t\t? localConfig(routeArgs)\n\t\t\t: localConfig || {};\n\n\tconfig = defaultConfig ? merge({}, defaultConfig, config) : config;\n\n\treturn config;\n}\n\nexport function v1ToV2(metaV1: V1_MetaDescriptor): V2_MetaDescriptor[] {\n\tconst metaV2: V2_MetaDescriptor[] = [];\n\n\tfor (const key in metaV1) {\n\t\tif (key === \"charset\" || key === \"charSet\") {\n\t\t\tmetaV2.push({ charSet: \"utf-8\" });\n\t\t} else if (key === \"title\") {\n\t\t\tmetaV2.push({ title: metaV1[key] as string });\n\t\t} else {\n\t\t\tif (typeof metaV1[key] === \"string\") {\n\t\t\t\tmetaV2.push({ name: key, content: metaV1[key] as string });\n\t\t\t} else if (metaV1[key] !== null && metaV1[key] !== undefined) {\n\t\t\t\tfor (const item of metaV1[key] as Array<\n\t\t\t\t\tRecord<string, string> | string\n\t\t\t\t>) {\n\t\t\t\t\tif (typeof item === \"string\") {\n\t\t\t\t\t\tmetaV2.push({ name: key, content: item });\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst entry: Record<string, string> = { tagName: \"meta\", ...item };\n\t\t\t\t\t\tmetaV2.push(entry);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn metaV2;\n}\n\nexport function v2ToV1(metaV2: V2_MetaDescriptor[]): V1_MetaDescriptor {\n\tconst metaV1: V1_MetaDescriptor = {};\n\n\tfor (const entry of metaV2) {\n\t\tif (\"charSet\" in entry || \"charset\" in entry) {\n\t\t\tmetaV1.charset = \"utf-8\";\n\t\t} else if (\"title\" in entry) {\n\t\t\tmetaV1.title = entry.title as string;\n\t\t} else if (\"name\" in entry) {\n\t\t\tmetaV1[entry.name as string] = entry.content as string;\n\t\t} else if (\"tagName\" in entry) {\n\t\t\tconst key = entry.tagName as string;\n\t\t\tdelete entry.tagName;\n\n\t\t\tif (metaV1[key] === undefined) {\n\t\t\t\tmetaV1[key] = [];\n\t\t\t}\n\n\t\t\t(metaV1[key] as Array<Record<string, string> | string>).push(\n\t\t\t\tentry as any,\n\t\t\t);\n\t\t}\n\t}\n\n\treturn metaV1;\n}\n"],"mappings":"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","names":["merge"]}